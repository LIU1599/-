<template>
  <div class="w-screen min-h-screen px-0 mx-0 p-6">
    <router-link to="/" class="inline-block mb-6 px-4 py-2 rounded-lg bg-green-100 text-green-700 font-semibold shadow hover:bg-green-200 transition-all">â† å›åˆ°ä¸»é¡µ</router-link>
    <div class="bg-white rounded-2xl shadow-lg p-8 mb-8">
      <h1 class="text-3xl font-bold mb-2 text-green-700 flex items-center"><span class="mr-2">ğŸŸ©</span>Vue åŸºç¡€ä¸è¿›é˜¶</h1>
      <p class="text-gray-700 mb-4">Vue æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼ JavaScript æ¡†æ¶ï¼Œæ˜“å­¦æ˜“ç”¨ï¼Œçµæ´»é«˜æ•ˆã€‚</p>
      <div class="border-l-4 border-green-400 pl-4 mb-6 text-gray-600">
        <b>é€‚ç”¨åœºæ™¯ï¼š</b>ä¸­å°å‹é¡¹ç›®ã€åå°ç®¡ç†ã€ç§»åŠ¨ç«¯ã€æ¸è¿›å¼é›†æˆã€‚
      </div>
    </div>

    <div class="bg-green-50 rounded-xl p-6 mb-8">
      <h2 class="text-xl font-semibold mb-2 text-green-600">åŸºç¡€ç”¨æ³•</h2>
      <p class="mb-2">1. å“åº”å¼æ•°æ®ä¸æ¨¡æ¿è¯­æ³•ï¼š</p>
      <div class="bg-gray-100 rounded p-4 mb-4 overflow-x-auto text-sm">
        <pre><code class="language-js">&lt;script setup&gt;
import { ref } from 'vue'
const count = ref(0)
&lt;/script&gt;

&lt;template&gt;
  &lt;button @click=\"count++\"&gt;è®¡æ•°ï¼š{{ count }}&lt;/button&gt;
&lt;/template&gt;</code></pre>
      </div>
      <p class="mb-2">2. ç»„ä»¶ä¸ Propsï¼š</p>
      <div class="bg-gray-100 rounded p-4 mb-4 overflow-x-auto text-sm">
        <pre><code class="language-js">// çˆ¶ç»„ä»¶
&lt;Child :msg=\"'Hello'\" /&gt;

// å­ç»„ä»¶
defineProps(['msg'])</code></pre>
      </div>
    </div>

    <div class="bg-blue-50 rounded-xl p-6 mb-8">
      <h2 class="text-xl font-semibold mb-2 text-blue-600">è¿›é˜¶ä¸ä¼˜åŒ–æŠ€å·§</h2>
      <ul class="list-disc ml-6 space-y-2 text-gray-700">
        <li>ä½¿ç”¨ <code>watch</code>ã€<code>computed</code> å®ç°å¤æ‚é€»è¾‘ã€‚</li>
        <li>åˆç†æ‹†åˆ†ç»„ä»¶ï¼Œæå‡å¤ç”¨æ€§ã€‚</li>
        <li>ä½¿ç”¨ <code>v-memo</code>ã€<code>v-once</code> ä¼˜åŒ–æ¸²æŸ“ã€‚</li>
        <li>å¼‚æ­¥ç»„ä»¶ã€è·¯ç”±æ‡’åŠ è½½æå‡æ€§èƒ½ã€‚</li>
      </ul>
    </div>

    <div class="bg-yellow-50 rounded-xl p-6 mb-8">
      <h2 class="text-xl font-semibold mb-2 text-yellow-600">å®æˆ˜å»ºè®® & å¸¸è§å‘</h2>
      <ul class="list-disc ml-6 space-y-2 text-gray-700">
        <li>é¿å…ç›´æ¥ä¿®æ”¹ propsï¼Œéœ€ç”¨ emit é€šä¿¡ã€‚</li>
        <li>v-for å»ºè®®åŠ å”¯ä¸€ keyã€‚</li>
        <li>setup é‡Œä¸è¦æ»¥ç”¨ watchï¼Œä¼˜å…ˆ computedã€‚</li>
        <li>æ³¨æ„å“åº”å¼ä¸¢å¤±é—®é¢˜ï¼ˆå¦‚å¯¹è±¡æ–°å¢å±æ€§ï¼‰ã€‚</li>
      </ul>
    </div>

    <div class="bg-purple-50 rounded-xl p-6 mb-8">
      <h2 class="text-xl font-semibold mb-2 text-purple-600">æ›´å¤šå®ä¾‹</h2>
      <div class="mb-6">
        <h3 class="font-bold mb-1">è‡ªå®šä¹‰æŒ‡ä»¤</h3>
        <div class="bg-gray-100 rounded p-2 text-xs overflow-x-auto mb-2">
          <pre><code class="language-js">// main.js
app.directive('focus', {
  mounted(el) {
    el.focus()
  }
})
// ä½¿ç”¨ï¼š<input v-focus />
</code></pre>
        </div>
      </div>
      <div class="mb-6">
        <h3 class="font-bold mb-1">æ’æ§½ç”¨æ³•</h3>
        <div class="bg-gray-100 rounded p-2 text-xs overflow-x-auto mb-2">
          <pre><code class="language-html">// çˆ¶ç»„ä»¶
<MyCard>
  <template #header>æ ‡é¢˜</template>
  <div>å†…å®¹</div>
</MyCard>
// å­ç»„ä»¶
<slot name="header"></slot>
<slot></slot>
</code></pre>
        </div>
      </div>
      <div>
        <h3 class="font-bold mb-1">watch/computed å®ä¾‹</h3>
        <div class="bg-gray-100 rounded p-2 text-xs overflow-x-auto mb-2">
          <pre><code class="language-js">import { ref, computed, watch } from 'vue'
const count = ref(0)
const double = computed(() => count.value * 2)
watch(count, val => console.log(val))
</code></pre>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-xl shadow p-6">
      <h2 class="text-xl font-semibold mb-2 text-green-700">æ¨èèµ„æº</h2>
      <ul class="list-disc ml-6">
        <li><a href="https://cn.vuejs.org/" target="_blank" class="text-green-600 underline">Vue å®˜æ–¹æ–‡æ¡£</a></li>
        <li><a href="https://vuejs.bootcss.com/" target="_blank" class="text-green-600 underline">Vue ä¸­æ–‡æ–‡æ¡£</a></li>
        <li><a href="https://juejin.cn/tag/Vue.js" target="_blank" class="text-green-600 underline">æ˜é‡‘ Vue ä¸“é¢˜</a></li>
      </ul>
    </div>

    <div class="content-grid">
      <!-- Vue2 å’Œ Vue3 åŒºåˆ« -->
      <Card title="Vue2 ä¸ Vue3 çš„åŒºåˆ«" type="primary" class="content-card card-bar-primary">
        <ul class="list-disc pl-6 space-y-2 text-gray-700">
          <li><b>å“åº”å¼åŸç†ï¼š</b>Vue2 ä½¿ç”¨ Object.definePropertyï¼ŒVue3 ä½¿ç”¨ Proxyï¼Œæ€§èƒ½æ›´ä¼˜ï¼Œæ”¯æŒæ›´å¤šæ•°æ®ç±»å‹ã€‚</li>
          <li><b>Composition APIï¼š</b>Vue3 æ–°å¢ Composition APIï¼ˆsetupã€refã€reactive ç­‰ï¼‰ï¼Œæ›´çµæ´»çš„é€»è¾‘å¤ç”¨ã€‚</li>
          <li><b>æ€§èƒ½ä¼˜åŒ–ï¼š</b>Vue3 ç¼–è¯‘æ›´å¿«ã€ä½“ç§¯æ›´å°ï¼Œæ”¯æŒ Tree-shakingã€‚</li>
          <li><b>TypeScript æ”¯æŒï¼š</b>Vue3 åŸç”Ÿæ”¯æŒ TypeScriptã€‚</li>
          <li><b>Fragment/Teleport/Suspenseï¼š</b>Vue3 æ–°å¢æ— æ ¹èŠ‚ç‚¹ã€ä¼ é€é—¨ã€å¼‚æ­¥ç»„ä»¶ç­‰ç‰¹æ€§ã€‚</li>
        </ul>
      </Card>

      <!-- ç”Ÿå‘½å‘¨æœŸé’©å­ -->
      <Card title="ç”Ÿå‘½å‘¨æœŸé’©å­" type="success" class="content-card card-bar-success">
        <div class="lifecycle-section">
          <div class="table-scroll">
            <table class="lifecycle-table">
              <thead>
                <tr>
                  <th>é˜¶æ®µ</th>
                  <th>Vue2 é’©å­</th>
                  <th>Vue3 é’©å­</th>
                  <th>è¯´æ˜</th>
                </tr>
              </thead>
              <tbody>
                <tr><td>åˆ›å»º</td><td>beforeCreate<br>created</td><td>setup</td><td>å®ä¾‹åˆå§‹åŒ–ã€æ•°æ®å“åº”å¼</td></tr>
                <tr><td>æŒ‚è½½</td><td>beforeMount<br>mounted</td><td>onBeforeMount<br>onMounted</td><td>DOM æŒ‚è½½å‰å</td></tr>
                <tr><td>æ›´æ–°</td><td>beforeUpdate<br>updated</td><td>onBeforeUpdate<br>onUpdated</td><td>æ•°æ®å˜æ›´ã€DOM æ›´æ–°å‰å</td></tr>
                <tr><td>é”€æ¯/å¸è½½</td><td>beforeDestroy<br>destroyed</td><td>onBeforeUnmount<br>onUnmounted</td><td>ç»„ä»¶é”€æ¯å‰å</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </Card>

      <!-- çˆ¶å­ç»„ä»¶å‡½æ•°ä¼ é€’æ–¹å¼ -->
      <Card title="çˆ¶å­ç»„ä»¶å‡½æ•°ä¼ é€’æ–¹å¼" type="warning" class="content-card card-bar-warning">
        <div class="parent-child-section">
          <h4>çˆ¶ä¼ å­ï¼ˆé€šè¿‡ props ä¼ é€’å‡½æ•°ï¼‰</h4>
          <div class="code-block-wrap">
            <pre class="code-block"><code id="code1" v-pre>&#47;&#47; çˆ¶ç»„ä»¶
&lt;MyChild :onAction=&quot;handleAction&quot; /&gt;

&#47;&#47; å­ç»„ä»¶ props æ¥æ”¶
props: {
  onAction: Function
},
&#47;&#47; å­ç»„ä»¶è°ƒç”¨
this.onAction(&#39;å‚æ•°&#39;)</code></pre>
            <button class="copy-btn" @click="copyCode('code1')">å¤åˆ¶</button>
          </div>
          <h4>å­ä¼ çˆ¶ï¼ˆé€šè¿‡ $emit äº‹ä»¶ï¼‰</h4>
          <div class="code-block-wrap">
            <pre class="code-block"><code id="code2" v-pre>&#47;&#47; å­ç»„ä»¶
this.$emit(&#39;customEvent&#39;, &#39;å‚æ•°&#39;)

&#47;&#47; çˆ¶ç»„ä»¶
&lt;MyChild @customEvent=&quot;handleCustomEvent&quot; /&gt;</code></pre>
            <button class="copy-btn" @click="copyCode('code2')">å¤åˆ¶</button>
          </div>
        </div>
      </Card>

      <!-- v-if ä¸ v-show åŒºåˆ« -->
      <Card title="v-if ä¸ v-show çš„åŒºåˆ«" type="danger" class="content-card card-bar-danger">
        <ul class="list-disc pl-6 space-y-2 text-gray-700">
          <li><b>v-ifï¼š</b>æ¡ä»¶æ¸²æŸ“ï¼ŒçœŸæ­£çš„ DOM é”€æ¯ä¸é‡å»ºï¼Œé€‚åˆåˆ‡æ¢ä¸é¢‘ç¹çš„åœºæ™¯ã€‚</li>
          <li><b>v-showï¼š</b>ä»…åˆ‡æ¢ display æ ·å¼ï¼Œé¢‘ç¹åˆ‡æ¢æ—¶æ€§èƒ½æ›´ä¼˜ã€‚</li>
          <li><b>å¯¹æ¯”ï¼š</b>v-if æœ‰æ›´é«˜çš„åˆ‡æ¢å¼€é”€ï¼Œv-show æœ‰åˆå§‹æ¸²æŸ“å¼€é”€ã€‚</li>
        </ul>
      </Card>
    </div>
  </div>
</template>

<script setup>
import { ref, watch, onMounted, onBeforeUnmount } from 'vue'
import * as echarts from 'echarts'

const chartType = ref('line')
const dataSet = ref('week')
let chart = null

const dataMap = {
  week: {
    x: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
    y: [120, 200, 150, 80, 70, 110, 130]
  },
  month: {
    x: Array.from({length: 30}, (_, i) => `${i+1}æ—¥`),
    y: Array.from({length: 30}, () => Math.floor(Math.random()*200+50))
  },
  quarter: {
    x: ['1æœˆ', '2æœˆ', '3æœˆ'],
    y: [800, 950, 700]
  }
}

function renderChart() {
  const dom = document.getElementById('echarts-demo')
  if (!dom) return
  if (!chart) {
    chart = echarts.init(dom)
  }
  const { x, y } = dataMap[dataSet.value]
  chart.setOption({
    tooltip: { trigger: 'axis' },
    legend: { data: ['æ•°æ®'] },
    toolbox: { feature: { saveAsImage: {} } },
    xAxis: { type: 'category', data: x },
    yAxis: { type: 'value' },
    series: [{ name: 'æ•°æ®', data: y, type: chartType.value, smooth: true }]
  })
  chart.resize()
}

onMounted(() => {
  renderChart()
  window.addEventListener('resize', () => chart && chart.resize())
})

onBeforeUnmount(() => {
  if (chart) {
    chart.dispose()
    chart = null
  }
})

watch([chartType, dataSet], renderChart)
</script>

<script>
export default {
  name: 'VuePage',
  methods: {
    copyCode(id) {
      const code = document.getElementById(id)?.innerText || ''
      if (code) {
        navigator.clipboard.writeText(code.replace(/\\n/g, '\n'))
        alert('ä»£ç å·²å¤åˆ¶ï¼')
      }
    }
  }
}
</script>

<style scoped>
.vue-page {
  min-height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 2rem;
}

.page-header {
  text-align: center;
  margin-bottom: 3rem;
  color: white;
}

.page-title {
  font-size: 2.7rem;
  font-weight: 900;
  margin-bottom: 1rem;
  text-shadow: 2px 2px 8px rgba(0,0,0,0.13);
  letter-spacing: 2px;
}

.page-subtitle {
  font-size: 1.2rem;
  opacity: 0.92;
  max-width: 600px;
  margin: 0 auto;
}

.content-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 2.2rem;
  max-width: 1000px;
  margin: 0 auto;
}

.content-card {
  background: rgba(255,255,255,0.97);
  border-radius: 18px;
  box-shadow: 0 8px 32px rgba(0,0,0,0.10);
  padding: 2.2rem 1.5rem 1.5rem 1.5rem;
  border: none;
  position: relative;
  transition: box-shadow 0.3s, transform 0.3s;
}
.content-card:hover {
  box-shadow: 0 16px 48px rgba(0,0,0,0.18);
  transform: translateY(-4px) scale(1.02);
}
.card-bar-primary::before {
  content: '';
  display: block;
  height: 6px;
  width: 100%;
  border-radius: 8px 8px 0 0;
  background: linear-gradient(90deg,#6366f1,#a5b4fc);
  position: absolute;
  left: 0; top: 0;
}
.card-bar-success::before {
  content: '';
  display: block;
  height: 6px;
  width: 100%;
  border-radius: 8px 8px 0 0;
  background: linear-gradient(90deg,#10b981,#6ee7b7);
  position: absolute;
  left: 0; top: 0;
}
.card-bar-warning::before {
  content: '';
  display: block;
  height: 6px;
  width: 100%;
  border-radius: 8px 8px 0 0;
  background: linear-gradient(90deg,#f59e0b,#fde68a);
  position: absolute;
  left: 0; top: 0;
}
.card-bar-danger::before {
  content: '';
  display: block;
  height: 6px;
  width: 100%;
  border-radius: 8px 8px 0 0;
  background: linear-gradient(90deg,#ef4444,#fca5a5);
  position: absolute;
  left: 0; top: 0;
}
.content-card h4 {
  font-size: 1.18rem;
  font-weight: 700;
  color: #4f46e5;
  margin-bottom: 0.7rem;
}
.list-disc {
  margin-left: 1.5rem;
  color: #374151;
  font-size: 1rem;
  line-height: 1.8;
}
.list-disc li {
  margin-bottom: 0.5rem;
}
.code-block-wrap {
  position: relative;
  margin-bottom: 1.2rem;
}
.code-block {
  background: #1e293b;
  color: #f1f5f9;
  border-radius: 8px;
  padding: 1rem;
  font-size: 0.98rem;
  font-family: 'Fira Mono', 'Consolas', 'Menlo', monospace;
  margin: 0.5rem 0 0.2rem 0;
  overflow-x: auto;
  line-height: 1.7;
}
.copy-btn {
  position: absolute;
  top: 10px;
  right: 16px;
  background: #6366f1;
  color: #fff;
  border: none;
  border-radius: 5px;
  padding: 0.25rem 0.7rem;
  font-size: 0.95rem;
  cursor: pointer;
  opacity: 0.85;
  transition: background 0.2s, opacity 0.2s;
  z-index: 2;
}
.copy-btn:hover {
  background: #4338ca;
  opacity: 1;
}
.table-scroll {
  overflow-x: auto;
}
.lifecycle-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.2rem 0;
  background: #f8fafc;
  border-radius: 8px;
  overflow: hidden;
  font-size: 1rem;
  min-width: 600px;
}
.lifecycle-table th, .lifecycle-table td {
  border: 1px solid #e5e7eb;
  padding: 0.7rem 0.5rem;
  text-align: center;
}
.lifecycle-table th {
  background: #6366f1;
  color: #fff;
  font-weight: 600;
}
.lifecycle-table tr:nth-child(even) td {
  background: #f3f4f6;
}
@media (max-width: 768px) {
  .vue-page {
    padding: 1rem;
  }
  .content-card {
    padding: 1rem 0.5rem 0.8rem 0.5rem;
  }
  .content-grid {
    gap: 0.8rem;
  }
  .page-title {
    font-size: 1.3rem;
  }
  .lifecycle-table th, .lifecycle-table td {
    font-size: 0.92rem;
    padding: 0.5rem 0.2rem;
  }
  .lifecycle-table {
    min-width: 400px;
  }
}
@media (prefers-color-scheme: dark) {
  .content-card {
    background: rgba(31,41,55,0.97);
    color: #f9fafb;
  }
  .list-disc {
    color: #d1d5db;
  }
  .lifecycle-table {
    background: #374151;
  }
  .lifecycle-table th {
    background: #6366f1;
    color: #fff;
  }
  .lifecycle-table td {
    color: #f9fafb;
    border-color: #4b5563;
  }
  .lifecycle-table tr:nth-child(even) td {
    background: #4b5563;
  }
  .code-block {
    background: #0f172a;
    color: #e0e7ef;
  }
}
</style> 